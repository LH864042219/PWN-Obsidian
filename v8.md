# 环境搭建
第一次遇到v8的题目，环境搭了好几天都快放弃了，最后还是找到问题了，必须说一下环境搭建的问题。
首先需要 depot_tools. 这个工具库是专门搞 Chromium 开发用的, 里面有一堆程序和脚本.
```shell
git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
export PATH=/path/to/depot_tools:$PATH
```

接着 clone v8, 并且下载工具. 可以用 depot_tools 中的 `fetch`, 它会在当前目录下生成一些文件如 `.cipd`, `.gclient`, `.gclient_entries`, `.gclient_previous_sync_commits` clone 完成后进入 v8 目录, 使用 `gclient sync` 下载工具.
```shell
fetch v8
cd v8
```
接着，将git版本reset到与题目一致的版本
```shell
git reset --hard 6dc88c191f5ecc5389dc26efa3ca0907faef3598  
git apply < oob.diff
```
**接下来，重要的一步**
```shell
gclient sync # 必须的一步，不然编译不了，我就是缺了这步搞了好几天没编译出来
./build/install-build-dep.sh # 这一步可能运行不了，ubuntu版本不对，但好像也不影响
```
之后便可以开始编译
```shell
# 编译debug版本  
tools/dev/v8gen.py x64.debug  
ninja -C out.gn/x64.debug d8  
# 编译release版本  这样会支持release版本可以使用job等调试
tools/dev/gm.py x64.release  
ninja -C out.gn/x64.release d8
```
编译完之后可以在out.gn/x64.release里面找到d8，然后就可以运行.js文件开始调试了